#!/usr/bin/env python3
import argparse, sys
from i3ipc import Connection

sway = Connection()

executable = sys.argv[1]

parser = argparse.ArgumentParser()

parser.add_argument("executable")
parser.add_argument("--app-id",
                    help="app_id if it's different from command")
parser.add_argument("--float",
                    help="use for floating windows, skips filtering by workspace",
                    action=argparse.BooleanOptionalAction)

args = parser.parse_args()

app_id = args.app_id or args.executable

focused = sway.get_tree().find_focused()
focused_workspace = focused.workspace()

target = None

for c in focused_workspace:
  if c.app_id == app_id:
    target = c
    break

if target:
  sway.command("[con_id={}] focus".format(target.id))
else:
  print("not found")
